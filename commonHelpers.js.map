{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImg(inputValue, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = BASE_URL + END_POINT;\n\n  const params = {\n    key: '43044638-81b288208bd41d7f3c4a2027f',\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { refs, hideLoader } from '../main.js';\n\nexport function renderImages(imagesArr) {\n  if (imagesArr.length === 0) {\n    hideLoader();\n    iziToast.error({\n      message: `❌ Sorry, there are no images matching your search query. Please, try again!`,\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  }\n  // refs.galleryElement.innerHTML = '';\n  //   } else {\n  const imgGallery = imagesArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"content-image\">\n    <p class=\"content-item\">Likes<span class=\"info-item\">${likes}</span></p>\n    <p class=\"content-item\">Views<span class=\"info-item\">${views}</span></p>\n    <p class=\"content-item\">Comments<span class=\"info-item\">${comments}</span></p>\n    <p class=\"content-item\">Downloads<span class=\"info-item\">${downloads}</span></p>\n    </div\n    </li>`\n    )\n    .join('');\n  // refs.galleryElement.innerHTML = imgGallery;\n  // refs.galleryElement.insertAdjacentHTML(\n  //   'beforeend',\n  //   renderImages(data.hits)\n  // );\n  return imgGallery;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImg } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nexport const refs = {\n  galleryElement: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.conteiner-loader'),\n  btnLoadMore: document.querySelector('.loadMore'),\n};\n\nconst inputValue = document.querySelector('input');\nlet currentPage = 1;\nlet maxPage = 0;\nconst preSize = 15;\n\n// ===========================================\nfunction showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n// ============\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.remove('is-hidden');\n}\n\nfunction hideLoadMore() {\n  refs.btnLoadMore.classList.add('is-hidden');\n}\n\n//===========================================\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  hideLoadMore();\n  currentPage = 1;\n  const searchImgs = inputValue.value.trim();\n  refs.galleryElement.innerHTML = '';\n\n  if (!searchImgs) {\n    hideLoader();\n    iziToast.info({\n      message: ` Please fill in the field for search`,\n      position: 'topRight',\n    });\n    refs.galleryElement.innerHTML = '';\n    return;\n  }\n\n  try {\n    showLoader();\n    const data = await getImg(inputValue, currentPage);\n    maxPage = Math.ceil(data.totalHits / preSize);\n    refs.galleryElement.insertAdjacentHTML(\n      'beforeend',\n      renderImages(data.hits)\n    );\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  checkBtnStatus();\n  e.target.reset();\n}\n\n// ==========================================\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  showLoader;\n  try {\n    const data = await getImg(inputValue, currentPage);\n\n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits));\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n  scroll();\n  checkBtnStatus();\n  hideLoader();\n}\n\n// ==============================================\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      color: 'yellow',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\nfunction scroll() {\n  const height = refs.gallery.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\n// ===============================================\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.refresh();\n"],"names":["getImg","inputValue","currentPage","url","params","axios","renderImages","imagesArr","hideLoader","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","maxPage","preSize","showLoader","showLoadMore","hideLoadMore","onFormSubmit","onLoadMoreClick","e","searchImgs","data","lightbox","error","checkBtnStatus","scroll","height","SimpleLightbox"],"mappings":"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"}