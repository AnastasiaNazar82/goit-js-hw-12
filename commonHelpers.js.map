{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImg(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = BASE_URL + END_POINT;\n\n  const params = {\n    key: '43044638-81b288208bd41d7f3c4a2027f',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { refs, hideLoader } from '../main.js';\n\nexport function renderImages(imagesArr) {\n  //   if (imagesArr.length === 0) {\n  //     hideLoader();\n  //     iziToast.error({\n  //       message: `❌ Sorry, there are no images matching your search query. Please, try again!`,\n  //       theme: 'dark',\n  //       progressBarColor: '#FFFFFF',\n  //       color: '#EF4040',\n  //       position: 'topRight',\n  //     });\n  //   }\n\n  const imgGallery = imagesArr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"content-image\">\n    <p class=\"content-item\">Likes<span class=\"info-item\">${likes}</span></p>\n    <p class=\"content-item\">Views<span class=\"info-item\">${views}</span></p>\n    <p class=\"content-item\">Comments<span class=\"info-item\">${comments}</span></p>\n    <p class=\"content-item\">Downloads<span class=\"info-item\">${downloads}</span></p>\n    </div\n    </li>`\n    )\n    .join('');\n\n  return imgGallery;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImg } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nexport const refs = {\n  galleryElement: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.conteiner-loader'),\n  btnLoadMore: document.querySelector('.loadMore'),\n};\n\nexport let query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst perPage = 15;\n\n// ==============================================\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadAddPage);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  hideLoadMore();\n  showLoader();\n\n  currentPage = 1;\n  query = e.target.elements.query.value.trim();\n  refs.galleryElement.innerHTML = '';\n\n  if (!query) {\n    hideLoader();\n    iziToast.info({\n      message: ` Please fill in the field for search`,\n      position: 'topRight',\n    });\n    refs.galleryElement.innerHTML = '';\n    return;\n  }\n\n  try {\n    showLoader();\n    const data = await getImg(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    refs.galleryElement.insertAdjacentHTML(\n      'beforeend',\n      renderImages(data.hits)\n    );\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  checkBtnStatus();\n  e.target.reset();\n}\n\n// ==========================================\nasync function onLoadAddPage() {\n  try {\n    currentPage += 1;\n    showLoader;\n    // hideLoadMore();\n    const data = await getImg(query, currentPage);\n\n    refs.galleryElement.insertAdjacentHTML(\n      'beforeend',\n      renderImages(data.hits)\n    );\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  scroll();\n  checkBtnStatus();\n}\n// ===========================================\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n// ============\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.remove('is-hidden');\n}\n\nfunction hideLoadMore() {\n  refs.btnLoadMore.classList.add('is-hidden');\n}\n\n//===========================================\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\n// =============================================\nfunction scroll() {\n  const height = refs.galleryElement.firstChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\n// ===============================================\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.refresh();\n"],"names":["getImg","query","currentPage","url","params","axios","renderImages","imagesArr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","maxPage","perPage","onFormSubmit","onLoadAddPage","e","hideLoadMore","showLoader","hideLoader","iziToast","data","lightbox","error","checkBtnStatus","scroll","showLoadMore","height","SimpleLightbox"],"mappings":"owBAEO,eAAeA,EAAOC,EAAOC,EAAa,CAG/C,MAAMC,EAFW,sBACC,QAGZC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACd,EAGE,OADY,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CCXO,SAASE,EAAaC,EAAW,CAoCtC,OAxBmBA,EAChB,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,oCACwBL,CAAa;AAAA,sCACXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,2DAGLC,CAAK;AAAA,2DACLC,CAAK;AAAA,8DACFC,CAAQ;AAAA,+DACPC,CAAS;AAAA;AAAA,UAGnE,EACA,KAAK,EAAE,CAGZ,CCpCO,MAAMC,EAAO,CAClB,eAAgB,SAAS,cAAc,UAAU,EACjD,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,mBAAmB,EAClD,YAAa,SAAS,cAAc,WAAW,CACjD,EAEO,IAAId,EACPC,EAAc,EACdc,EAAU,EACd,MAAMC,EAAU,GAIhBF,EAAK,KAAK,iBAAiB,SAAUG,CAAY,EACjDH,EAAK,YAAY,iBAAiB,QAASI,CAAa,EAExD,eAAeD,EAAaE,EAAG,CAS7B,GARAA,EAAE,eAAc,EAChBC,IACAC,IAEApB,EAAc,EACdD,EAAQmB,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCL,EAAK,eAAe,UAAY,GAE5B,CAACd,EAAO,CACVsB,IACAC,EAAS,KAAK,CACZ,QAAS,uCACT,SAAU,UAChB,CAAK,EACDT,EAAK,eAAe,UAAY,GAChC,MACD,CAED,GAAI,CACFO,IACA,MAAMG,EAAO,MAAMzB,EAAOC,EAAOC,CAAW,EAC5Cc,EAAU,KAAK,KAAKS,EAAK,UAAYR,CAAO,EAC5CF,EAAK,eAAe,mBAClB,YACAT,EAAamB,EAAK,IAAI,CAC5B,EACIC,EAAS,QAAO,CACjB,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDJ,IACAK,IACAR,EAAE,OAAO,OACX,CAGA,eAAeD,GAAgB,CAC7B,GAAI,CACFjB,GAAe,EAGf,MAAMuB,EAAO,MAAMzB,EAAOC,EAAOC,CAAW,EAE5Ca,EAAK,eAAe,mBAClB,YACAT,EAAamB,EAAK,IAAI,CAC5B,EACIC,EAAS,QAAO,CACjB,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDJ,IACAM,IACAD,GACF,CAEO,SAASN,GAAa,CAC3BP,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CAEO,SAASQ,GAAa,CAC3BR,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CAGA,SAASe,GAAe,CACtBf,EAAK,YAAY,UAAU,OAAO,WAAW,CAC/C,CAEA,SAASM,GAAe,CACtBN,EAAK,YAAY,UAAU,IAAI,WAAW,CAC5C,CAIA,SAASa,GAAiB,CACpB1B,GAAec,GACjBK,IACAG,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,UAChB,CAAK,GAEDM,GAEJ,CAEA,SAASD,GAAS,CAChB,MAAME,EAAShB,EAAK,eAAe,WAAW,sBAAuB,EAAC,OACtE,OAAO,SAAS,CACd,IAAKgB,EAAS,EACd,SAAU,QACd,CAAG,CACH,CAGA,MAAML,EAAW,IAAIM,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDN,EAAS,QAAS"}